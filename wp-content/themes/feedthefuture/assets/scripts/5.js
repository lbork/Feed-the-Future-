webpackJsonp([5],{10:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=function(){function t(e){s(this,t),this.el=e,this.addScrollTrack(),this.setVariables(),this.setUp(),this.addListeners()}return n(t,[{key:"setVariables",value:function(){this.current=null,this.list=this.el.querySelector("[data-list]"),this.slides=this.list.querySelectorAll("[data-slide]"),this.numSlides=this.slides.length,this.setSlideRatio(),this.getContainerWidth()}},{key:"setSlideRatio",value:function(){this.slideRatio=9/16}},{key:"getContainerWidth",value:function(){this.containerWidth=this.el.clientWidth}},{key:"setUp",value:function(){this.el.setAttribute("data-init",""),this.addCaptionContainer(),this.setDimensions(),this.checkScroll(),this.addButtons()}},{key:"addScrollTrack",value:function(){this.scrollTrack=document.createElement("div"),this.scrollTrack.classList.add("carousel-block__scroll-track"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("carousel-block__wrapper"),this.scrollTrack.innerHTML=this.el.innerHTML,this.el.innerHTML="",this.wrapper.appendChild(this.scrollTrack),this.el.appendChild(this.wrapper)}},{key:"addCaptionContainer",value:function(){this.slideCaption=document.createElement("div"),this.slideCaption.classList.add("carousel-block__caption-container"),this.slideCaption.setAttribute("aria-live","polite"),this.el.parentNode.insertBefore(this.slideCaption,this.el.nextSibling)}},{key:"setDimensions",value:function(){this.setContainerDimensions(),this.setSlideDimensions()}},{key:"setContainerDimensions",value:function(){this.wrapper.style.height=this.containerWidth*this.slideRatio+"px",this.list.style.width=this.containerWidth*this.numSlides+"px"}},{key:"setSlideDimensions",value:function(){for(var t=0,e=this.slides.length;t<e;t++)this.slides[t].style.width=this.containerWidth+"px",this.slides[t].style.height=this.containerWidth*this.slideRatio+"px"}},{key:"addButtons",value:function(){this.slidePrev=document.createElement("button"),this.slidePrev.textContent="Previous",this.slidePrev.classList.add("carousel-block__previous"),this.slidePrev.setAttribute("aria-hidden","true"),this.slidePrev.setAttribute("tabindex","-1"),this.slideNext=document.createElement("button"),this.slideNext.textContent="Next",this.slideNext.classList.add("carousel-block__next"),this.slideNext.setAttribute("aria-hidden","true"),this.slideNext.setAttribute("tabindex","-1"),this.el.appendChild(this.slidePrev),this.el.appendChild(this.slideNext)}},{key:"addListeners",value:function(){this.slidePrev.addEventListener("click",this.prevSlide.bind(this)),this.slideNext.addEventListener("click",this.nextSlide.bind(this)),window.addEventListener("resize",this.debounce(this.updateDimensions.bind(this),50)),this.scrollTrack.addEventListener("scroll",this.debounce(this.checkScroll.bind(this),50))}},{key:"checkScroll",value:function(){var t=Math.round(this.scrollTrack.scrollLeft/this.containerWidth);t!==this.current&&this.updateCurrent(t)}},{key:"updateCurrent",value:function(t){this.current=t,this.updateCaption()}},{key:"updateDimensions",value:function(){this.getContainerWidth(),this.setDimensions(),this.scrollTo(this.scrollTrack,this.containerWidth*this.current,50)}},{key:"updateCaption",value:function(){var t=this.slides[this.current].querySelector("[data-slide-caption]");this.slideCaption.innerHTML=t.innerHTML}},{key:"prevSlide",value:function(){this.changeSlides(-1)}},{key:"nextSlide",value:function(){this.changeSlides(1)}},{key:"changeSlides",value:function(t){var e=this.current+t;this.el.setAttribute("data-direction",1===t?"next":"prev"),e<0?e=this.numSlides-1:e>this.numSlides-1&&(e=0),this.scrollTo(this.scrollTrack,this.containerWidth*e,200)}},{key:"debounce",value:function(t,e,i){var s=void 0;return function(){var n=this,l=arguments,r=function(){s=null,i||t.apply(n,l)},a=i&&!s;clearTimeout(s),s=setTimeout(r,e),a&&t.apply(n,l)}}},{key:"scrollTo",value:function(t,e,i){if(!(i<=0)){var s=e-t.scrollLeft,n=s/i*10;setTimeout(function(){t.scrollLeft=t.scrollLeft+n,t.scrollLeft!==e&&this.scrollTo(t,e,i-10)}.bind(this),10)}}}]),t}();e.default=l}});
//# sourceMappingURL=5.js.map